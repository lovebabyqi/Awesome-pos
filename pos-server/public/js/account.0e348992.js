(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["account"],{"13d5":function(t,e,a){"use strict";var r=a("23e7"),n=a("d58f").left,o=a("a640"),i=a("ae40"),c=o("reduce"),l=i("reduce",{1:0});r({target:"Array",proto:!0,forced:!c||!l},{reduce:function(t){return n(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},5552:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"accounts"}},[a("h2",{directives:[{name:"show",rawName:"v-show",value:t.isToday,expression:"isToday"}]},[t._v("今日账目记录")]),a("h2",{directives:[{name:"show",rawName:"v-show",value:!t.isToday,expression:"!isToday"}]},[t._v("所有账目记录")]),a("div",{staticClass:"accounts-title"},[a("span",[t._v("本月总成交金额:"+t._s(t.sumTotal))]),a("span",[t._v("今日成交金额:"+t._s(t.todayTotal))]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-left",circle:""},on:{click:t.handleRefresh}}),a("el-button",{on:{click:t.toggleAll}},[t._v("查看所有账单")]),a("el-button",{on:{click:t.toggleToday}},[t._v("查看今日账单")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:!0,"default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{type:"index",width:"50",index:t.sumIndex}}),a("el-table-column",{attrs:{prop:"timeDate",label:"日期",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"orderList",label:"商品",width:"550",formatter:t.formatter}}),a("el-table-column",{attrs:{prop:"time",label:"结算时间",width:"100",formatter:t.formatterTime}}),a("el-table-column",{attrs:{prop:"priceTotal",label:"金额"}})],1),a("el-pagination",{attrs:{layout:"prev, pager, next",background:"",total:t.totalLength,"page-size":9},on:{"current-change":t.currentPage}})],1)},n=[],o=(a("4de4"),a("13d5"),a("fb6a"),a("dca8"),a("96cf"),a("1da1")),i=a("365c"),c=a("5f72"),l={name:"Account",created:function(){this.getAllAccount()},data:function(){return{allAccount:[],tableData:[],totalLength:0,sumTotal:0,todayTotal:0,page:1,todayDate:"",isToday:!0}},methods:{getAllAccount:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["e"])();case 2:a=e.sent,r=a.status,n=a.msg,o=a.data,0===r?(t.allAccount=Object.freeze(o),t.todayDate=(new Date).toLocaleDateString(),t.todayTotal=o.filter((function(e){return e.timeDate===t.todayDate})).reduce((function(t,e){return t+ +e.priceTotal}),0),t.sumTotal=t.allAccount.reduce((function(t,e){return t+ +e.priceTotal}),0),t.toggleToday(),Object(c["Message"])({message:n,type:"success"})):Object(c["Message"])({message:n,type:"error"});case 5:case"end":return e.stop()}}),e)})))()},sumIndex:function(t){return t+1+8*(this.page-1)},formatter:function(t,e){return t.orderList.reduce((function(t,e){return t+e.productName+"x"+e.productCount+"单价:"+e.productPrice+"元、"}),"")},formatterTime:function(t,e){if(t.time){var a=new Date(JSON.parse(t.time));return a.toLocaleString()}return"未记录时间"},currentPage:function(t){this.page=t;var e=8*(t-1),a=8*t;this.tableData=this.allAccount.slice(e,a)},handleRefresh:function(){this.getAllAccount()},toggleAll:function(){this.isToday=!1,this.totalLength=this.allAccount.length,this.tableData=this.allAccount.slice(0,8)},toggleToday:function(){var t=this;this.isToday=!0;var e=this.allAccount.filter((function(e){return e.timeDate===t.todayDate}));this.totalLength=e.length,this.tableData=e.slice(0,8)}}},s=l,u=(a("959e"),a("2877")),d=Object(u["a"])(s,r,n,!1,null,"f076e924",null);e["default"]=d.exports},"959e":function(t,e,a){"use strict";var r=a("a868"),n=a.n(r);n.a},a868:function(t,e,a){},d58f:function(t,e,a){var r=a("1c0b"),n=a("7b0b"),o=a("44ad"),i=a("50c4"),c=function(t){return function(e,a,c,l){r(a);var s=n(e),u=o(s),d=i(s.length),f=t?d-1:0,h=t?-1:1;if(c<2)while(1){if(f in u){l=u[f],f+=h;break}if(f+=h,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=h)f in u&&(l=a(l,u[f],f,s));return l}};t.exports={left:c(!1),right:c(!0)}}}]);
//# sourceMappingURL=account.0e348992.js.map